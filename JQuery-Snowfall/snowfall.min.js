(function(){for(var d=0,b=["webkit","moz"],a=0;a<b.length&&!window.requestAnimationFrame;++a)window.requestAnimationFrame=window[b[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[a]+"CancelAnimationFrame"]||window[b[a]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,a){var g=(new Date).getTime(),f=Math.max(0,16-(g-d)),h=window.setTimeout(function(){b(g+f)},f);d=g+f;return h});window.cancelAnimationFrame||(window.cancelAnimationFrame=
function(b){clearTimeout(b)})})();
var snowFall=function(){function d(){var b={flakeCount:35,flakeColor:"#ffffff",flakeIndex:999999,minSize:1,maxSize:2,minSpeed:1,maxSpeed:5,round:!1,shadow:!1,collection:!1,image:!1,collectionHeight:40},a={},c=[],d=0,g=0,f=0,h=0,m=0,k=0,l=0,r=function(b,a){for(var c in a)b.hasOwnProperty(c)&&(b[c]=a[c])},e=function(b,a){return Math.round(b+Math.random()*(a-b))},n=function(b,a){for(var c in a)b.style[c]=a[c]+("width"==c||"height"==c?"px":"")},s=function(a,c,d,l,p){this.id=p;this.x=a+m;this.y=c+h;this.size=
d;this.speed=l;this.step=0;this.stepSize=e(1,10)/100;b.collection&&(this.target=canvasCollection[e(0,canvasCollection.length-1)]);a=null;b.image?(a=new Image,a.src=b.image):(a=document.createElement("div"),n(a,{background:b.flakeColor}));a.className="snowfall-flakes";a.setAttribute("id","flake-"+this.id);n(a,{width:this.size,height:this.size,position:"absolute",top:this.y,left:this.x,fontSize:0,zIndex:b.flakeIndex});b.round&&n(a,{"-moz-border-radius":~~b.maxSize+"px","-webkit-border-radius":~~b.maxSize+
"px",borderRadius:~~b.maxSize+"px"});b.shadow&&n(a,{"-moz-box-shadow":"1px 1px 1px #555","-webkit-box-shadow":"1px 1px 1px #555",boxShadow:"1px 1px 1px #555"});document.body.appendChild(a);this.element=a;this.update=function(){this.y+=this.speed;this.y>h+g-(this.size+6)&&this.reset();this.element.style.top=this.y+"px";this.element.style.left=~~this.x+"px";this.step+=this.stepSize;this.x+=Math.cos(this.step);(this.x>m+f-k||this.x<k)&&this.reset()};this.reset=function(){this.y=h;this.x=m+e(k,f-k);this.stepSize=
e(1,10)/100;this.size=e(100*b.minSize,100*b.maxSize)/100;this.speed=e(b.minSpeed,b.maxSpeed)}},p=function(){for(var a=0;a<c.length;a+=1)c[a].update();l=requestAnimationFrame(function(){p()})};return{snow:function(q,l){r(b,l);a=q;g=a.clientHeight;f=a.offsetWidth;h=a.offsetTop;m=a.offsetLeft;a.snow=this;"body"===a.tagName.toLowerCase()&&(k=25);window.onresize=function(){g=a.clientHeight;f=a.offsetWidth;h=a.offsetTop;m=a.offsetLeft};for(i=0;i<b.flakeCount;i+=1)d=c.length,c.push(new s(e(k,f-k),e(0,g),
e(100*b.minSize,100*b.maxSize)/100,e(b.minSpeed,b.maxSpeed),d));p()},clear:function(){for(var b=null,b=a.getElementsByClassName?a.getElementsByClassName("snowfall-flakes"):a.querySelectorAll(".snowfall-flakes"),d=b.length;d--;)a.removeChild(b[d]);c=[];cancelAnimationFrame(l)}}}return{snow:function(b,a){if("string"==typeof a)if(0<b.length)for(var c=0;c<b.length;c++)b[c].snow&&b[c].snow.clear();else b.snow.clear();else if(0<b.length)for(c=0;c<b.length;c++)(new d).snow(b[c],a);else(new d).snow(b,a)}}}();